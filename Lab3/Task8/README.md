# Задача №8: Поиск ближайших точек к началу координат

## Описание задачи
Требуется найти несколько точек из множества, которые находятся на минимальном расстоянии от начала координат. Для этого нужно разработать алгоритм, эффективно находящий `k` ближайших точек по евклидовой норме (расстояние до начала координат).

## Структура кода
Код разделён на две части: основная реализация алгоритма и набор тестов для проверки его корректности и производительности.

### Папка `src`
Папка с исходным кодом.

#### Файл `NearestPoints.py`

1. **Функция `get_norma`**

   - **Параметры**:
     - `point` (тип: `Tuple[int, int]`) — координаты точки в двумерном пространстве.
   
   - **Возвращаемое значение**:
     - `int` — квадрат расстояния от начала координат до данной точки.

   - **Описание**:
     - Вычисляет квадрат евклидовой нормы точки: $ \text{norma} = x^2 + y^2 $. 
     - Использование квадрата нормы позволяет избежать вычисления квадратного корня, что ускоряет алгоритм.

2. **Функция `partition_by_norma`**

   - **Параметры**:
     - `lst` (тип: `List[Tuple[int, int]]`) — список точек.
     - `start` (тип: `int`) — начальный индекс подмассива для обработки.
     - `end` (тип: `int`) — конечный индекс подмассива для обработки.
     - `pivot` (тип: `Tuple[int, int]`) — опорный элемент для разделения.
   
   - **Возвращаемое значение**:
     - `Tuple[int, int]` — кортеж из двух индексов: `end_left` и `end_mid`, указывающих на границы групп точек с меньшими и равными нормами по отношению к опорной точке.
   
   - **Описание**:
     - Реализует алгоритм разделения (partition) из быстрой сортировки, но с учётом квадрата нормы.
     - Делит точки на три группы:
       1. Точки с нормой меньше нормы опорного элемента.
       2. Точки с нормой, равной норме опорного элемента.
       3. Точки с нормой больше нормы опорного элемента.

3. **Функция `quick_sort_by_norma`**

   - **Параметры**:
     - `lst` (тип: `List[Tuple[int, int]]`) — список точек.
     - `start` (тип: `int`) — начальный индекс подмассива для сортировки (по умолчанию `0`).
     - `end` (тип: `int`) — конечный индекс подмассива для сортировки (по умолчанию `-1`, что означает конец списка).
   
   - **Возвращаемое значение**:
     - `None` (сортирует список на месте).
   
   - **Описание**:
     - Реализует быструю сортировку точек на основе их нормы.
     - Рекурсивно сортирует точки слева и справа от опорного элемента.

4. **Функция `nearest_points`**

   - **Параметры**:
     - `lst` (тип: `List[Tuple[int, int]]`) — список точек.
     - `number` (тип: `int`) — количество ближайших точек, которые нужно найти.
   
   - **Возвращаемое значение**:
     - `List[Tuple[int, int]]` — список `number` ближайших точек.
   
   - **Описание**:
     - Сортирует все точки по возрастанию их нормы и возвращает первые `number` точек.

5. **Функция `nearest_points_as_quick_sort`**

   - **Параметры**:
     - `lst` (тип: `List[Tuple[int, int]]`) — список точек.
     - `number` (тип: `int`) — количество ближайших точек.
     - `output` (тип: `List[Tuple[int, int]]`) — список для сохранения результата.
     - `start` (тип: `int`) — начальный индекс подмассива (по умолчанию `0`).
     - `end` (тип: `int`) — конечный индекс подмассива (по умолчанию `-1`).
   
   - **Возвращаемое значение**:
     - `None` (результат сохраняется в `output`).
   
   - **Описание**:
     - Использует модифицированную быструю сортировку для поиска `k` ближайших точек.
     - Проверяет, сколько точек находится в подмассивах, разделенных partition_by_norma. 
       - Если количество точек в левом подмассиве (end_left) меньше number, все они добавляются в output. 
       - Далее проверяется количество точек в среднем подмассиве (end_mid). Если количество точек из end_left до end_mid также не превосходит number, все они добавляются в output, а функция рекурсивно вызывается для правого подмассива (чтобы найти оставшиеся ближайшие точки). 
       - Если ни один из случаев не выполняется, ближайшие точки находятся исключительно в левом подмассиве, и рекурсия продолжается только для этого подмассива.
6. **Функция `main`**

   - **Описание**:
     - Считывает входные данные (количество точек и список координат) из файла.
     - Вызывает функцию `nearest_points_as_quick_sort` для поиска ближайших точек.
     - Записывает результат в файл `output.txt`.

7. **Запуск программы**
   - Блок `if __name__ == "__main__":` вызывает `main()` для выполнения программы.

### Папка `tests`
Папка с тестами.

#### Файл `NearestPoints_test.py`

1. **Функция `test_quick_sort_by_norma`**

   - **Описание**:
     - Проверяет корректность работы `quick_sort_by_norma`.
     - Генерирует случайные точки и проверяет, что после сортировки нормы не убывают.

2. **Функция `test_nearest_points_as_quick_sort`**

   - **Описание**:
     - Проверяет корректность работы `nearest_points_as_quick_sort`.
     - Генерирует случайные точки и проверяет, что `k` ближайших точек найдены корректно.

3. **Функция `test_time`**

   - **Описание**:
     - Проверяет производительность программы.
     - Измеряет время выполнения функции `main` и проверяет, что оно не превышает 2 секунд.

### Папка `txtf`
Папка с входными и выходными файлами.

#### Входные данные (`input.txt`)
Содержат:
1. Одно число — количество точек `k`.
2. Список точек, каждая на новой строке в формате `x y`.

#### Выходные данные (`output.txt`)
Содержат `k` ближайших точек в формате `x y`.

## Запуск программы и тестов

### Решение

1. Перейдите в папку с решением задачи:
```bash
cd ITMOalgorithms/Lab3/Task8/
```

2. Исходные данные находятся в папке `txtf` в файле `input.txt`. Чтобы открыть его в текстовом редакторе:
```bash
notepad txtf/input.txt
```

3. Запустите программу:
```bash
python src/NearestPoints.py
```

4. Результаты будут записаны в `output.txt`. Чтобы открыть его в текстовом редакторе:
```bash
notepad txtf/output.txt
```

### Тестирование

1. Запустите тесты с помощью `pytest`:
```bash
pytest tests/NearestPoints_test.py
```
