# Задача №7: Поиск максимальной суммы подмассива

## Задание
Реализовать алгоритм для нахождения подмассива с максимальной суммой элементов.

## Структура
Этот код реализует алгоритмы поиска подмассива с максимальной суммой, используя как эффективный линейный подход, так и наивный квадратичный метод для проверки корректности. Вот основные элементы структуры кода:

### Папка `src`
Папка с исходным кодом

##### Файл `FindMaxSubarray.py`

1. **Функция `find_max_subarray`**

   - **Параметры**:
     - `lst` (тип: `List[int]`) — список целых чисел.

   - **Возвращаемое значение**:
     - Кортеж из трех элементов:
       - `max_subarray` (тип: `int`) — сумма элементов максимального подмассива.
       - `left` (тип: `int`) — индекс начала максимального подмассива.
       - `right` (тип: `int`) — индекс конца максимального подмассива (не включительно).

   - **Описание**:
     - Использует алгоритм на основе сканирующей строки (Kadane's Algorithm), модифицированный для отслеживания индексов:
       - Инициализирует переменные для хранения максимальной суммы (`max_subarray`), а также границ (`left`, `right`).
       - Проходит по списку, вычисляя текущую сумму (`sm`) и минимальную сумму, предшествующую текущему индексу (`min_sm`).
       - Если разница между текущей суммой и минимальной суммой больше, чем `max_subarray`, обновляет максимальную сумму и границы.
       - Возвращает кортеж с максимальной суммой и соответствующими индексами.

2. **Функция `find_max_subarray_naive`**

   - **Параметры**:
     - `lst` (тип: `List[int]`) — список целых чисел.

   - **Возвращаемое значение**:
     - Кортеж из трех элементов:
       - `max_subarray` (тип: `int`) — сумма элементов максимального подмассива.
       - `left` (тип: `int`) — индекс начала максимального подмассива.
       - `right` (тип: `int`) — индекс конца максимального подмассива (не включительно).

   - **Описание**: (для тестов)
     - Использует наивный метод (перебор всех возможных подмассивов) для поиска максимальной суммы:
       - Перебирает все возможные подмассивы, вычисляя их суммы.
       - Если найденная сумма больше, чем текущий максимум, обновляет максимальную сумму и границы.
       - Этот метод имеет квадратичную сложность и используется для проверки корректности эффективного алгоритма.

3. **Функция `main`**

   - **Описание**:
     - Читает исходные данные из файла `input.txt` с помощью функции `read()`.
     - Вызывает функцию `find_max_subarray` для поиска максимального подмассива.
     - Записывает результат (индексы и сумму) в файл `output.txt` с помощью функции `write()`.

4. **Запуск программы**
   - Блок `if __name__ == "__main__":` вызывает `main()` для выполнения программы, если она запускается как самостоятельный скрипт.

### Папка `tests`
Папка с тестами

##### Файл `FindMaxSubarray_test.py`

1. **Функция `test_find_max_subarray`**

   - **Описание**:
     - Тестирует функции `find_max_subarray` и `find_max_subarray_naive` на случайных данных:
       - Генерирует случайные списки целых чисел и проверяет, что результаты двух функций совпадают.

2. **Функция `test_find_max_subarray_all_neg`**

   - **Описание**:
     - Проверяет корректность работы на списках, состоящих только из отрицательных чисел:
       - Находит максимальный элемент и его индекс.
       - Проверяет, что `find_max_subarray` возвращает этот элемент и его позицию как границы подмассива.

3. **Функция `test_find_max_subarray_all_pos`**

   - **Описание**:
     - Тестирует функцию на списках, состоящих только из положительных чисел:
       - Проверяет, что сумма всего списка совпадает с результатом функции `find_max_subarray`.

4. **Функция `test_time`**

   - **Описание**:
     - Проверяет производительность функции `main`:
       - Измеряет время выполнения и проверяет, что оно не превышает 2 секунд.

### Папка `txtf`
Папка с input- и output-файлами

##### Входные данные (файл `input.txt`)
Список целых чисел, разделенных пробелом. Числа не превышают по модулю $10^9$, а количество чисел $10^5$.

##### Выходные данные (файл `output.txt`)
Три строки:
- `start`: индекс начала подмассива с максимальной суммой.
- `end`: индекс конца подмассива (не включительно).
- `sum`: сумма элементов этого подмассива.

## Запуск

### Решение
1. Перейдите в папку с решением задачи:
```bash
cd ITMOalgorithms/Lab2/Task7/
```
2. Исходные данные находятся в папке `txtf` в файле `input.txt`. Чтобы открыть его в блокноте, используйте:
```bash
notepad txtf/input.txt
```
3. Запустите программу:
```bash
python src/FindMaxSubarray.py
```
4. Выходные данные будут в папке `txtf` в файле `output.txt`. Чтобы открыть его в блокноте, используйте:
```bash
notepad txtf/output.txt
```

### Тесты
1. Запустите тесты:
```bash
pytest tests/FindMaxSubarray_test.py
```